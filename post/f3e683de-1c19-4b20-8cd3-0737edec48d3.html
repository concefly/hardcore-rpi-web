<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>教你外网登录树莓派远程桌面 - 硬核树莓派</title>
  </head>
  <body>
    <div id='__root'>
      <h1>教你外网登录树莓派远程桌面</h1>

<article>
  <p>在上期的<a href="https://zhuanlan.zhihu.com/p/98080664">教你从零开始连接树莓派远程桌面</a>中，介绍了如何在同一局域网下登录树莓派远程桌面。但如果你出门在外，在外网环境，比如在公司或学校，还能不能登录？答案是肯定的。</p>
<p>这篇文章就来教大家，如何外网登录树莓派远程桌面。</p>
<h1 id="配置路由器端口转发">配置路由器端口转发</h1>
<p>我们知道，VNC viewer 需要有树莓派的 IP 地址才能登录远程桌面。当你在外网环境时，如果不做处理，你只能访问到宽带拨号分配给路由器的 IP，而不是树莓派的。这时候就要配置路由器的“端口转发规则”，让<strong>外网 VNC Viewer 能访问到树莓派的 IP 地址</strong>。</p>
<p>首先，进入路由器管理后台，找到“端口转发”设置界面，配置 <code>5900</code> 端口转发（这里假设路由器的外网 IP 是 <code>100.100.100.100</code>，树莓派的内网 IP 是 <code>192.168.1.123</code>）。至于为什么是 5900 端口，这是因为树莓派上运行的 VNC Server 的默认端口号是 5900，所以配置这个端口就行。原理如下图所示：</p>
<p><img src="/media/15801465197761/15801961106927.jpg" alt=""></p>
<p>配置完这个后，外网所有到 <code>100.100.100.100:5900</code> 的流量都会被路由器转发到 <code>192.168.1.123:5900</code>。</p>
<p>当然，不同品牌的路由器的“端口转发”设置可能不一样，要灵活处理。这里贴一张我的 Linksys 路由器端口转发配置的截图：</p>
<p><img src="/media/15801465197761/15801957785074.jpg" alt="-w450"></p>
<h1 id="vnc-viewer-外网登录树莓派远程桌面">VNC Viewer 外网登录树莓派远程桌面</h1>
<p>如果你已经看过 <a href="https://zhuanlan.zhihu.com/p/98080664">教你从零开始连接树莓派远程桌面</a> ，那这一步就非常简单了。</p>
<p>新建 VNC 连接，然后 VNC Server 的 IP 地址填路由器的外网 IP，点“确定”即可。</p>
<p><img src="/media/15801465197761/15801966778251.jpg" alt="-w552"></p>
<h1 id="注意事项">注意事项</h1>
<ul>
<li>路由器的外网 IP 由宽带拨号动态分配，可能会变化，所以如果突然发现连不上远程桌面，首先看下外网 IP 是不是已经变了。</li>
<li>远程桌面端口暴露到外网后，最好修改树莓派登录密码，不要再继续使用默认的 <code>raspberry</code>，否则会有安全风险。</li>
</ul>
<p><img src="/media/15801465197761/15801973014421.jpg" alt="-w539"></p>
<h1 id="参考资料">参考资料</h1>
<ul>
<li><a href="https://help.realvnc.com/hc/en-us/articles/360002253878-Configuring-VNC-Connect-Using-Parameters">Configuring VNC Connect Using Parameters – RealVNC Help Center</a></li>
<li><a href="https://help.realvnc.com/hc/en-us/articles/360002313518-vncserver-x11-Man-Page">vncserver-x11 Man Page – RealVNC Help Center</a></li>
<li><a href="https://www.192ly.com/qiu-zhu/r-dkys.html">路由器端口映射怎么设置?_路由器虚拟服务器设置方法-192路由网</a></li>
</ul>

</article>
    </div>

    <script>
      window.context = {"site":{"post":{"list":[{"path":"/post/a356a857-d4e0-4d1b-b279-99b41c9e12e7.html","title":"树莓派 4B 详细资料"},{"path":"/post/c6717517-cd43-4c06-9d90-9130fbf64f22.html","title":"树莓派 VS Arduino，哪个才是你的菜"},{"path":"/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html","title":"树莓派 4B 安装和启动"},{"path":"/post/eda0226e-c61b-457b-887f-70eefcc97678.html","title":"从零开始：连接树莓派远程桌面"},{"path":"/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html","title":"教你外网登录树莓派远程桌面"},{"path":"/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html","title":"教你用树莓派远程桌面和电脑互传文件"},{"path":"/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html","title":"树莓派投屏秒变家庭影院（安装 kodi）"},{"path":"/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html","title":"从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器"},{"path":"/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html","title":"树莓派软路由 OpenWrt 简介"},{"path":"/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html","title":"从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH"},{"path":"/post/f13bd0ef-a754-4e12-9a6a-3b60b5a4036d.html","title":"无树莓派硬件体验：虚拟机安装 Raspberry Pi Desktop 操作系统"},{"path":"/post/7f4c9c2e-1531-48d6-a220-11716f13df1a.html","title":"树莓派更换软件源"},{"path":"/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html","title":"树莓派调节显示屏分辨率"}],"count":13}},"page":{"title":"教你外网登录树莓派远程桌面","content":"<p>在上期的<a href=\"https://zhuanlan.zhihu.com/p/98080664\">教你从零开始连接树莓派远程桌面</a>中，介绍了如何在同一局域网下登录树莓派远程桌面。但如果你出门在外，在外网环境，比如在公司或学校，还能不能登录？答案是肯定的。</p>\n<p>这篇文章就来教大家，如何外网登录树莓派远程桌面。</p>\n<h1 id=\"配置路由器端口转发\">配置路由器端口转发</h1>\n<p>我们知道，VNC viewer 需要有树莓派的 IP 地址才能登录远程桌面。当你在外网环境时，如果不做处理，你只能访问到宽带拨号分配给路由器的 IP，而不是树莓派的。这时候就要配置路由器的“端口转发规则”，让<strong>外网 VNC Viewer 能访问到树莓派的 IP 地址</strong>。</p>\n<p>首先，进入路由器管理后台，找到“端口转发”设置界面，配置 <code>5900</code> 端口转发（这里假设路由器的外网 IP 是 <code>100.100.100.100</code>，树莓派的内网 IP 是 <code>192.168.1.123</code>）。至于为什么是 5900 端口，这是因为树莓派上运行的 VNC Server 的默认端口号是 5900，所以配置这个端口就行。原理如下图所示：</p>\n<p><img src=\"/media/15801465197761/15801961106927.jpg\" alt=\"\"></p>\n<p>配置完这个后，外网所有到 <code>100.100.100.100:5900</code> 的流量都会被路由器转发到 <code>192.168.1.123:5900</code>。</p>\n<p>当然，不同品牌的路由器的“端口转发”设置可能不一样，要灵活处理。这里贴一张我的 Linksys 路由器端口转发配置的截图：</p>\n<p><img src=\"/media/15801465197761/15801957785074.jpg\" alt=\"-w450\"></p>\n<h1 id=\"vnc-viewer-外网登录树莓派远程桌面\">VNC Viewer 外网登录树莓派远程桌面</h1>\n<p>如果你已经看过 <a href=\"https://zhuanlan.zhihu.com/p/98080664\">教你从零开始连接树莓派远程桌面</a> ，那这一步就非常简单了。</p>\n<p>新建 VNC 连接，然后 VNC Server 的 IP 地址填路由器的外网 IP，点“确定”即可。</p>\n<p><img src=\"/media/15801465197761/15801966778251.jpg\" alt=\"-w552\"></p>\n<h1 id=\"注意事项\">注意事项</h1>\n<ul>\n<li>路由器的外网 IP 由宽带拨号动态分配，可能会变化，所以如果突然发现连不上远程桌面，首先看下外网 IP 是不是已经变了。</li>\n<li>远程桌面端口暴露到外网后，最好修改树莓派登录密码，不要再继续使用默认的 <code>raspberry</code>，否则会有安全风险。</li>\n</ul>\n<p><img src=\"/media/15801465197761/15801973014421.jpg\" alt=\"-w539\"></p>\n<h1 id=\"参考资料\">参考资料</h1>\n<ul>\n<li><a href=\"https://help.realvnc.com/hc/en-us/articles/360002253878-Configuring-VNC-Connect-Using-Parameters\">Configuring VNC Connect Using Parameters – RealVNC Help Center</a></li>\n<li><a href=\"https://help.realvnc.com/hc/en-us/articles/360002313518-vncserver-x11-Man-Page\">vncserver-x11 Man Page – RealVNC Help Center</a></li>\n<li><a href=\"https://www.192ly.com/qiu-zhu/r-dkys.html\">路由器端口映射怎么设置?_路由器虚拟服务器设置方法-192路由网</a></li>\n</ul>\n","raw":"\n在上期的[教你从零开始连接树莓派远程桌面](https://zhuanlan.zhihu.com/p/98080664)中，介绍了如何在同一局域网下登录树莓派远程桌面。但如果你出门在外，在外网环境，比如在公司或学校，还能不能登录？答案是肯定的。\n\n这篇文章就来教大家，如何外网登录树莓派远程桌面。\n\n# 配置路由器端口转发\n\n我们知道，VNC viewer 需要有树莓派的 IP 地址才能登录远程桌面。当你在外网环境时，如果不做处理，你只能访问到宽带拨号分配给路由器的 IP，而不是树莓派的。这时候就要配置路由器的“端口转发规则”，让**外网 VNC Viewer 能访问到树莓派的 IP 地址**。\n\n首先，进入路由器管理后台，找到“端口转发”设置界面，配置 `5900` 端口转发（这里假设路由器的外网 IP 是 `100.100.100.100`，树莓派的内网 IP 是 `192.168.1.123`）。至于为什么是 5900 端口，这是因为树莓派上运行的 VNC Server 的默认端口号是 5900，所以配置这个端口就行。原理如下图所示：\n\n![](/media/15801465197761/15801961106927.jpg)\n\n配置完这个后，外网所有到 `100.100.100.100:5900` 的流量都会被路由器转发到 `192.168.1.123:5900`。\n\n当然，不同品牌的路由器的“端口转发”设置可能不一样，要灵活处理。这里贴一张我的 Linksys 路由器端口转发配置的截图：\n\n![-w450](/media/15801465197761/15801957785074.jpg)\n\n# VNC Viewer 外网登录树莓派远程桌面\n\n如果你已经看过 [教你从零开始连接树莓派远程桌面](https://zhuanlan.zhihu.com/p/98080664) ，那这一步就非常简单了。\n\n新建 VNC 连接，然后 VNC Server 的 IP 地址填路由器的外网 IP，点“确定”即可。\n\n![-w552](/media/15801465197761/15801966778251.jpg)\n\n# 注意事项\n- 路由器的外网 IP 由宽带拨号动态分配，可能会变化，所以如果突然发现连不上远程桌面，首先看下外网 IP 是不是已经变了。\n- 远程桌面端口暴露到外网后，最好修改树莓派登录密码，不要再继续使用默认的 `raspberry`，否则会有安全风险。\n\n\n![-w539](/media/15801465197761/15801973014421.jpg)\n\n\n# 参考资料\n- [Configuring VNC Connect Using Parameters – RealVNC Help Center](https://help.realvnc.com/hc/en-us/articles/360002253878-Configuring-VNC-Connect-Using-Parameters)\n- [vncserver-x11 Man Page – RealVNC Help Center](https://help.realvnc.com/hc/en-us/articles/360002313518-vncserver-x11-Man-Page)\n- [路由器端口映射怎么设置?_路由器虚拟服务器设置方法-192路由网](https://www.192ly.com/qiu-zhu/r-dkys.html)"}}
    </script>

    <script src="https://cdn.bootcss.com/react/16.10.2/umd/react.production.min.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.10.2/umd/react-dom.production.min.js"></script>

    <script src="/post.js"></script>
  </body>
</html>
