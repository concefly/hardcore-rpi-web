<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH - 硬核树莓派</title>
  </head>
  <body>
    <div id='__root'>
      <h1>从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH</h1>

<article>
  <p>树莓派的很多 DIY 玩法都要求联网和 ssh 登录，但这对于没有屏幕、没有键盘、没有网线的裸板树莓派玩家来说，就不是一件特别容易的事了。</p>
<p>幸运的是，树莓派官方在2016年5月的<a href="https://www.raspberrypi.org/blog/another-update-raspbian/">发布日志</a>里提到，Raspbian 系统支持用户在 boot 目录下新建 <code>wpa_supplicant.conf</code> 和 <code>ssh</code> 文件开机初始化 WiFi 和 ssh。</p>
<p>这个小技巧对于裸板树莓派玩家尤其有用。</p>
<h1 id="配置-wifi">配置 WiFi</h1>
<p>将刷好 Raspbian 系统的 SD 卡用电脑读取。在 boot 分区，也就是树莓派的 /boot 目录下新建 <code>wpa_supplicant.conf</code> 文件。按如下格式写入：</p>
<pre><code>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=&lt;Insert country code here&gt;

network={
 ssid=&quot;&lt;Name of your WiFi&gt;&quot;
 psk=&quot;&lt;Password for your WiFi&gt;&quot;
}</code></pre><p><code>&lt;Insert country code here&gt;</code> 是地区代码，换成 <code>CN</code> （CN 指中国大陆）即可。</p>
<blockquote>
<p>在 <a href="https://www.iso.org/obp/ui/">https://www.iso.org/obp/ui/</a> 这个地址可以查看所有地区代码</p>
</blockquote>
<p><code>&lt;Name of your WiFi&gt;</code> 换成 WiFi 名，<code>&lt;Password for your WiFi&gt;</code> 换成 WiFi 密码明文。</p>
<p>当树莓派启动的时候，这个文件会被移动到 <code>/etc/wpa_supplicant/</code> 配置目录下，覆盖掉原来的网络配置。</p>
<p>一些注意事项：</p>
<ol>
<li>最好填 2.4G 的 WiFi，网卡兼容性更好</li>
</ol>
<h2 id="无密码网络">无密码网络</h2>
<p>如果 WiFi 不需要密码，则需要配置 <code>key_mgmt=NONE</code>，比如：</p>
<pre><code>network={
    ssid=&quot;testing&quot;
    key_mgmt=NONE
}</code></pre><h2 id="隐藏网络">隐藏网络</h2>
<p>有些 WiFi 设置了隐藏，则需要配置 <code>scan_ssid=1</code>，比如：</p>
<pre><code>network={
    ssid=&quot;yourHiddenSSID&quot;
    scan_ssid=1
    psk=&quot;Your_wifi_password&quot;
}</code></pre><h2 id="多-wifi-配置">多 WiFi 配置</h2>
<p>树莓派可以同时配置多个 WiFi，只需要配置多个 <code>network</code> 即可，比如：</p>
<pre><code>network={
    ssid=&quot;SchoolNetworkSSID&quot;
    psk=&quot;passwordSchool&quot;
    priority=1
    id_str=&quot;school&quot;
}

network={
    ssid=&quot;HomeNetworkSSID&quot;
    psk=&quot;passwordHome&quot;
    priority=2
    id_str=&quot;home&quot;
}</code></pre><p><code>id_str</code> 是标识符。<code>priority</code> 是优先级，越大优先级越高。</p>
<h1 id="配置-ssh">配置 ssh</h1>
<p>和 WiFi 配置相似，同样在 boot 分区新建一个空白文件，命名为 <code>ssh</code>。注意要小写且不要有任何扩展名。</p>
<p>当树莓派启动的时候，会去检查 boot 目录。如果有 <code>ssh</code> 文件，就会开启 ssh 服务。</p>
<h1 id="参考资料">参考资料</h1>
<ol>
<li><a href="https://www.raspberrypi.org/blog/another-update-raspbian/">The latest update to Raspbian</a></li>
<li><a href="https://raspberrypi.stackexchange.com/questions/10251/prepare-sd-card-for-wifi-on-headless-pi/57023#57023">Prepare SD card for Wifi on Headless Pi</a></li>
<li><a href="https://www.raspberrypi.org/documentation/remote-access/ssh/">SSH (Secure Shell)</a></li>
<li><a href="https://www.raspberrypi.org/documentation/configuration/wireless/headless.md">Setting up a Raspberry Pi headless</a></li>
<li><a href="http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html">http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html</a></li>
</ol>

</article>
    </div>

    <script>
      window.context = {"site":{"post":{"list":[{"path":"/post/a356a857-d4e0-4d1b-b279-99b41c9e12e7.html","title":"树莓派 4B 详细资料"},{"path":"/post/c6717517-cd43-4c06-9d90-9130fbf64f22.html","title":"树莓派 VS Arduino，哪个才是你的菜"},{"path":"/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html","title":"树莓派 4B 安装和启动"},{"path":"/post/eda0226e-c61b-457b-887f-70eefcc97678.html","title":"从零开始：连接树莓派远程桌面"},{"path":"/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html","title":"教你外网登录树莓派远程桌面"},{"path":"/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html","title":"教你用树莓派远程桌面和电脑互传文件"},{"path":"/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html","title":"树莓派投屏秒变家庭影院（安装 kodi）"},{"path":"/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html","title":"从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器"},{"path":"/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html","title":"树莓派软路由 OpenWrt 简介"},{"path":"/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html","title":"从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH"},{"path":"/post/f13bd0ef-a754-4e12-9a6a-3b60b5a4036d.html","title":"无树莓派硬件体验：虚拟机安装 Raspberry Pi Desktop 操作系统"},{"path":"/post/7f4c9c2e-1531-48d6-a220-11716f13df1a.html","title":"树莓派更换软件源"},{"path":"/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html","title":"树莓派调节显示屏分辨率"}],"count":13}},"page":{"title":"从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH","content":"<p>树莓派的很多 DIY 玩法都要求联网和 ssh 登录，但这对于没有屏幕、没有键盘、没有网线的裸板树莓派玩家来说，就不是一件特别容易的事了。</p>\n<p>幸运的是，树莓派官方在2016年5月的<a href=\"https://www.raspberrypi.org/blog/another-update-raspbian/\">发布日志</a>里提到，Raspbian 系统支持用户在 boot 目录下新建 <code>wpa_supplicant.conf</code> 和 <code>ssh</code> 文件开机初始化 WiFi 和 ssh。</p>\n<p>这个小技巧对于裸板树莓派玩家尤其有用。</p>\n<h1 id=\"配置-wifi\">配置 WiFi</h1>\n<p>将刷好 Raspbian 系统的 SD 卡用电脑读取。在 boot 分区，也就是树莓派的 /boot 目录下新建 <code>wpa_supplicant.conf</code> 文件。按如下格式写入：</p>\n<pre><code>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\ncountry=&lt;Insert country code here&gt;\n\nnetwork={\n ssid=&quot;&lt;Name of your WiFi&gt;&quot;\n psk=&quot;&lt;Password for your WiFi&gt;&quot;\n}</code></pre><p><code>&lt;Insert country code here&gt;</code> 是地区代码，换成 <code>CN</code> （CN 指中国大陆）即可。</p>\n<blockquote>\n<p>在 <a href=\"https://www.iso.org/obp/ui/\">https://www.iso.org/obp/ui/</a> 这个地址可以查看所有地区代码</p>\n</blockquote>\n<p><code>&lt;Name of your WiFi&gt;</code> 换成 WiFi 名，<code>&lt;Password for your WiFi&gt;</code> 换成 WiFi 密码明文。</p>\n<p>当树莓派启动的时候，这个文件会被移动到 <code>/etc/wpa_supplicant/</code> 配置目录下，覆盖掉原来的网络配置。</p>\n<p>一些注意事项：</p>\n<ol>\n<li>最好填 2.4G 的 WiFi，网卡兼容性更好</li>\n</ol>\n<h2 id=\"无密码网络\">无密码网络</h2>\n<p>如果 WiFi 不需要密码，则需要配置 <code>key_mgmt=NONE</code>，比如：</p>\n<pre><code>network={\n    ssid=&quot;testing&quot;\n    key_mgmt=NONE\n}</code></pre><h2 id=\"隐藏网络\">隐藏网络</h2>\n<p>有些 WiFi 设置了隐藏，则需要配置 <code>scan_ssid=1</code>，比如：</p>\n<pre><code>network={\n    ssid=&quot;yourHiddenSSID&quot;\n    scan_ssid=1\n    psk=&quot;Your_wifi_password&quot;\n}</code></pre><h2 id=\"多-wifi-配置\">多 WiFi 配置</h2>\n<p>树莓派可以同时配置多个 WiFi，只需要配置多个 <code>network</code> 即可，比如：</p>\n<pre><code>network={\n    ssid=&quot;SchoolNetworkSSID&quot;\n    psk=&quot;passwordSchool&quot;\n    priority=1\n    id_str=&quot;school&quot;\n}\n\nnetwork={\n    ssid=&quot;HomeNetworkSSID&quot;\n    psk=&quot;passwordHome&quot;\n    priority=2\n    id_str=&quot;home&quot;\n}</code></pre><p><code>id_str</code> 是标识符。<code>priority</code> 是优先级，越大优先级越高。</p>\n<h1 id=\"配置-ssh\">配置 ssh</h1>\n<p>和 WiFi 配置相似，同样在 boot 分区新建一个空白文件，命名为 <code>ssh</code>。注意要小写且不要有任何扩展名。</p>\n<p>当树莓派启动的时候，会去检查 boot 目录。如果有 <code>ssh</code> 文件，就会开启 ssh 服务。</p>\n<h1 id=\"参考资料\">参考资料</h1>\n<ol>\n<li><a href=\"https://www.raspberrypi.org/blog/another-update-raspbian/\">The latest update to Raspbian</a></li>\n<li><a href=\"https://raspberrypi.stackexchange.com/questions/10251/prepare-sd-card-for-wifi-on-headless-pi/57023#57023\">Prepare SD card for Wifi on Headless Pi</a></li>\n<li><a href=\"https://www.raspberrypi.org/documentation/remote-access/ssh/\">SSH (Secure Shell)</a></li>\n<li><a href=\"https://www.raspberrypi.org/documentation/configuration/wireless/headless.md\">Setting up a Raspberry Pi headless</a></li>\n<li><a href=\"http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html\">http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html</a></li>\n</ol>\n","raw":"\n树莓派的很多 DIY 玩法都要求联网和 ssh 登录，但这对于没有屏幕、没有键盘、没有网线的裸板树莓派玩家来说，就不是一件特别容易的事了。\n\n幸运的是，树莓派官方在2016年5月的[发布日志](https://www.raspberrypi.org/blog/another-update-raspbian/)里提到，Raspbian 系统支持用户在 boot 目录下新建 `wpa_supplicant.conf` 和 `ssh` 文件开机初始化 WiFi 和 ssh。\n\n这个小技巧对于裸板树莓派玩家尤其有用。\n\n# 配置 WiFi\n\n将刷好 Raspbian 系统的 SD 卡用电脑读取。在 boot 分区，也就是树莓派的 /boot 目录下新建 `wpa_supplicant.conf` 文件。按如下格式写入：\n\n```\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\ncountry=<Insert country code here>\n\nnetwork={\n ssid=\"<Name of your WiFi>\"\n psk=\"<Password for your WiFi>\"\n}\n```\n\n`<Insert country code here>` 是地区代码，换成 `CN` （CN 指中国大陆）即可。\n\n> 在 https://www.iso.org/obp/ui/ 这个地址可以查看所有地区代码\n\n`<Name of your WiFi>` 换成 WiFi 名，`<Password for your WiFi>` 换成 WiFi 密码明文。\n\n\n当树莓派启动的时候，这个文件会被移动到 `/etc/wpa_supplicant/` 配置目录下，覆盖掉原来的网络配置。\n\n一些注意事项：\n1. 最好填 2.4G 的 WiFi，网卡兼容性更好\n\n## 无密码网络\n\n如果 WiFi 不需要密码，则需要配置 `key_mgmt=NONE`，比如：\n\n```\nnetwork={\n    ssid=\"testing\"\n    key_mgmt=NONE\n}\n```\n\n## 隐藏网络\n\n有些 WiFi 设置了隐藏，则需要配置 `scan_ssid=1`，比如：\n\n```\nnetwork={\n    ssid=\"yourHiddenSSID\"\n    scan_ssid=1\n    psk=\"Your_wifi_password\"\n}\n```\n\n## 多 WiFi 配置\n\n树莓派可以同时配置多个 WiFi，只需要配置多个 `network` 即可，比如：\n\n```\nnetwork={\n    ssid=\"SchoolNetworkSSID\"\n    psk=\"passwordSchool\"\n    priority=1\n    id_str=\"school\"\n}\n\nnetwork={\n    ssid=\"HomeNetworkSSID\"\n    psk=\"passwordHome\"\n    priority=2\n    id_str=\"home\"\n}\n```\n\n`id_str` 是标识符。`priority` 是优先级，越大优先级越高。\n\n# 配置 ssh\n\n和 WiFi 配置相似，同样在 boot 分区新建一个空白文件，命名为 `ssh`。注意要小写且不要有任何扩展名。\n\n当树莓派启动的时候，会去检查 boot 目录。如果有 `ssh` 文件，就会开启 ssh 服务。\n\n# 参考资料\n1. [The latest update to Raspbian](https://www.raspberrypi.org/blog/another-update-raspbian/)\n2. [Prepare SD card for Wifi on Headless Pi](https://raspberrypi.stackexchange.com/questions/10251/prepare-sd-card-for-wifi-on-headless-pi/57023#57023)\n3. [SSH (Secure Shell)](https://www.raspberrypi.org/documentation/remote-access/ssh/)\n4. [Setting up a Raspberry Pi headless](https://www.raspberrypi.org/documentation/configuration/wireless/headless.md)\n5. [http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html](http://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html)"}}
    </script>

    <script src="https://cdn.bootcss.com/react/16.10.2/umd/react.production.min.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.10.2/umd/react-dom.production.min.js"></script>

    <script src="/post.js"></script>
  </body>
</html>
