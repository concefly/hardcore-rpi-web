

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    
  <meta name="keywords" content="树莓派, raspberry pi, ARM, 单板机, 树莓派教程, 树莓派资料, Linux, WiFi,无线热点,软路由">

    
  <meta name="description" content="硬核树莓派, 最硬核的树莓派研究分享, 概述 树莓派是一款来源于英国慈善组织“Raspberry Pi 基金会”的基于微处理器的硬件平台。核心是 Broadcom ARM 架构 CPU，可以完整运行 Ubuntu、Windows 10 IoT Core 等操作系统。 最新款的树莓派 4B 还板载了 USB 3.0 接口、千兆以太网卡、2.4/5 GHz 802.11b/g/n/ac 无线网卡等设备，性能强大，价格却足够便宜，能用来 DIY 很多东西。 这篇文章就来教大家，如何从零开始将树莓派打造成一个功能强大的无线热点。 准备 宽带 以太网线 micro SD 卡和读卡器 树莓派（最好是 4B 版本） 安装 Raspbian...">


    <title>从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器 - 硬核树莓派</title>

    
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d2cc8aee7f6616b541ffcc6d5451ef03";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </head>
  <body>
    <div id='__root'>
      <div style='display: none'>
  <h1>从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器</h1>

  <article>
    <h1 id="概述">概述</h1>
<p>树莓派是一款来源于英国慈善组织“Raspberry Pi 基金会”的基于<strong>微处理器</strong>的硬件平台。核心是 Broadcom ARM 架构 CPU，可以完整运行 Ubuntu、Windows 10 IoT Core 等操作系统。</p>
<p>最新款的树莓派 4B 还板载了 USB 3.0 接口、千兆以太网卡、2.4/5 GHz 802.11b/g/n/ac 无线网卡等设备，性能强大，价格却足够便宜，能用来 DIY 很多东西。</p>
<p>这篇文章就来教大家，如何从零开始将树莓派打造成一个功能强大的无线热点。</p>
<h1 id="准备">准备</h1>
<ul>
<li>宽带</li>
<li>以太网线</li>
<li>micro SD 卡和读卡器</li>
<li>树莓派（最好是 4B 版本）</li>
</ul>
<h1 id="安装-raspbian-操作系统">安装 Raspbian 操作系统</h1>
<p>安装 Raspbian 是为了给无线热点准备操作系统环境。具体步骤参考：<a href="https://zhuanlan.zhihu.com/p/98078430">树莓派 4B 安装和启动</a></p>
<p>最好也要把软件源指向国内，避免后续软件下载速度太慢：<a href="https://zhuanlan.zhihu.com/p/98079246">教你如何给树莓派更换软件源</a></p>
<h1 id="安装配置-hostapd-服务">安装配置 hostapd 服务</h1>
<p>Hostapd 是一个运行在用户态，提供热点访问和鉴权的服务端进程。</p>
<p><strong>首先安装服务</strong>：</p>
<pre><code class="language-bash">$ sudo apt install hostapd
$ sudo systemctl stop hostapd</code></pre>
<p><strong>接着，我们需要配置一下热点参数</strong>。配置文件地址在 <code>/etc/hostapd/hostapd.conf</code>，打开并编辑（如果没有这个文件的话，新建一个即可）：</p>
<pre><code class="language-bash">$ sudo nano /etc/hostapd/hostapd.conf</code></pre>
<p>写入如下配置项。注意要根据自己的实际情况，替换 <code>???</code> 处的内容：</p>
<ul>
<li>ssid: WiFi 名称，8~64 个字符，最好用英文字母，不要出现特殊字符</li>
<li>hw_mode: WiFi 网络模式，一般填 <code>g</code> 即可，设备支持的话可以填 <code>a</code> 启用 5G 频段：<ul>
<li>a = IEEE 802.11a (5 GHz)</li>
<li>b = IEEE 802.11b (2.4 GHz)</li>
<li>g = IEEE 802.11g (2.4 GHz)</li>
</ul>
</li>
<li>channel: 信道编号。如果上面配置了 <code>hw_mode=g</code> 使用 2.4G 频段，则一般填 <code>7</code> 即可。如果配置了 5G 频段，则信道编号有所不同，具体参考：<a href="https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8">WLAN信道列表</a></li>
<li>wpa_passphrase: WiFi 密码，最好用英文加数字，不要出现特殊字符</li>
</ul>
<pre><code>interface=wlan0
driver=nl80211
ssid=???
hw_mode=???
channel=???
wmm_enabled=0
macaddr_acl=0
auth_algs=1
ignore_broadcast_ssid=0
wpa=2
wpa_passphrase=???
wpa_key_mgmt=WPA-PSK
wpa_pairwise=TKIP
rsn_pairwise=CCMP</code></pre><p>这里给出一个示例配置值：</p>
<p><img src="/media/15779531074073/15788222445162.jpg" alt="-w1081"></p>
<p><strong>然后，给 hostapd 指定我们刚刚配置的配置文件</strong>。打开 <code>/etc/default/hostapd</code> 这个文件，去掉 <code>DAEMON_CONF</code> 的注释，并配置成 <code>/etc/hostapd/hostapd.conf</code>，如图所示。意思就是告诉 hostapd 要从 <code>/etc/hostapd/hostapd.conf</code> 读取配置参数。</p>
<pre><code class="language-bash">sudo nano /etc/default/hostapd</code></pre>
<p><img src="/media/15779531074073/15788224110950.jpg" alt="-w1081"></p>
<p><strong>最后，启动 hostapd 服务</strong>。</p>
<pre><code class="language-bash">sudo systemctl unmask hostapd
sudo systemctl enable hostapd
sudo systemctl start hostapd</code></pre>
<p>过一会儿，就能看到 hardcore-rpi 的 WiFi 信号了。但是这个 WiFi 还没有连接网络，也不能给客户端分配 IP，接下来的小节就解决这些问题。</p>
<p><img src="/media/15779531074073/15788272088655.jpg" alt="-w442"></p>
<p>如果服务启动失败，比如报错 <code>&quot;systemctl status hostapd.service&quot; and &quot;journalctl -xe&quot; for details</code> 等，可以按如下步骤逐一排查：</p>
<ol>
<li>重启树莓派，再尝试启动 hostapd</li>
<li>命令行执行 <code>sudo /usr/sbin/hostapd /etc/hostapd/hostapd.conf</code>，直接运行  hostapd，观察输出日志，一般都能发现问题。比如常见的：<ol>
<li><code>hostapd.conf</code> 配置错误导致启动失败。检查配置文件，修改后，新启动 hostapd 即可。</li>
<li>wlan0 端口未开启导致启动失败。执行 <code>sudo ifconfig wlan0 up</code> 开启端口后，重新启动 hostapd 即可。</li>
</ol>
</li>
</ol>
<p>这里给一个直接运行 hostapd 成功的截图，只要看到 &quot;ENABLED&quot; 字样就表示启动成功了。</p>
<p><img src="/media/15779531074073/15788268889917.jpg" alt="-w638"></p>
<h1 id="配置-wlan-静态-ip">配置 wlan 静态 IP</h1>
<p>用于 WiFi 热点的 wlan0 端口需要有固定的 IP 地址。假设树莓派热点的 IP 网段是 192.168.4.x，那么 wlan0 的 IP 就要设置成静态地址 192.168.4.1。</p>
<p>树莓派以及大多数 Linux 发行版都由 dhcpcd 服务通过 DHCP（动态主机配置协议）获取自己的 IP 地址，所以这里我们要改掉 dhcpcd 的配置，让 wlan0 端口有静态 IP。</p>
<p>编辑 dhcpcd 配置文件：</p>
<pre><code class="language-bash">sudo nano /etc/dhcpcd.conf</code></pre>
<p>在文件末尾添加：</p>
<pre><code>interface wlan0
    static ip_address=192.168.4.1/24
    nohook wpa_supplicant</code></pre><p><img src="/media/15779531074073/15788388792344.jpg" alt=""></p>
<p>保存后，重启 dhcpcd 服务：</p>
<pre><code class="language-bash">sudo systemctl restart dhcpcd</code></pre>
<p>执行 <code>ifconfig</code> 可以看到，wlan0 的 IP 地址已经固定成 192.168.4.1 了。</p>
<p><img src="/media/15779531074073/15788389034861.jpg" alt=""></p>
<h1 id="安装配置-dnsmasq-服务">安装配置 dnsmasq 服务</h1>
<p>dnsmasq 是一个小型的用于配置 DNS 和 DHCP 的工具，适用于小型网络，它提供了 DNS 和  DHCP 功能。</p>
<p><strong>首先安装 dnsmasq 服务。</strong></p>
<pre><code class="language-bash">$ sudo apt install dnsmasq
$ sudo systemctl stop dnsmasq</code></pre>
<p><strong>接着，配置 dnsmasq 参数</strong>。打开 <code>/etc/dnsmasq.conf</code> 配置文件，把里面的其他内容都注释掉，添加新的配置项：</p>
<pre><code class="language-bash">sudo nano /etc/dnsmasq.conf</code></pre>
<pre><code>interface=wlan0
dhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h</code></pre><p>dhcp-range 配置项的意思是，dhcp 服务会给客户端分配 192.168.4.2 到 192.168.4.20 的 IP 空间，24 小时租期。更多配置信息可以参考 <a href="http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html">Man page of DNSMASQ</a></p>
<p><img src="/media/15779531074073/15788432541704.jpg" alt="-w1081"></p>
<p><strong>然后，重启 dnsmasq 服务</strong>。</p>
<pre><code class="language-bash">sudo systemctl reload dnsmasq</code></pre>
<p>此时用手机去连接热点，就能看到成功分配了动态 IP。</p>
<p><img src="/media/15779531074073/15788446273098.jpg" alt="-w440"></p>
<h1 id="配置-ip-包转发">配置 IP 包转发</h1>
<p>上面我们给树莓派安装了 hostapd 热点服务 和 dnsmasq DHCP 服务，已经可以让手机连接 WiFi 热点并分配到动态 IP 了，但仍不能联网，所以现在就剩最后一步：给树莓派配置 IP 包转发，让手机连接 WiFi 后能正常上网。</p>
<p><strong>首先，开启 Linux 内核的 ip 转发功能</strong>。打开 <code>/etc/sysctl.conf</code> 系统配置文件，去掉 <code>net.ipv4.ip_forward=1</code> 这个配置项的注释：</p>
<p><img src="/media/15779531074073/15788466235582.jpg" alt=""></p>
<blockquote>
<p>出于安全考虑，Linux系统默认是禁止数据包转发的。所谓转发即当主机拥有多于一块的网卡时，其中一块收到数据包，根据数据包的目的ip地址将数据包发往本机另一块网卡，该网卡根据路由表继续发送数据包。这通常是路由器所要实现的功能。</p>
<p>要让Linux系统具有路由转发功能，需要配置一个Linux的内核参数net.ipv4.ip_forward。这个参数指定了Linux系统当前对路由转发功能的支持情况；其值为0时表示禁止进行IP转发；如果是1,则说明IP转发功能已经打开。</p>
<p><a href="https://www.jianshu.com/p/134eeae69281">Linux ip_forward 数据包转发</a></p>
</blockquote>
<p><strong>然后，修改 Linux 防火墙规则</strong>，完成报文源地址目标转换。</p>
<pre><code class="language-bash">sudo iptables -t nat -A  POSTROUTING -o eth0 -j MASQUERADE</code></pre>
<p><strong>接着，设置开机自动导入防火墙规则</strong>。</p>
<pre><code class="language-bash">sudo sh -c &quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</code></pre>
<p>编辑 <code>/etc/rc.local</code>，把 <code>iptables-restore &lt; /etc/iptables.ipv4.nat</code> 加到最后一行 <code>exit 0</code> 的前面：</p>
<p><img src="/media/15779531074073/15788473680529.jpg" alt=""></p>
<p>然后，重启树莓派：</p>
<pre><code class="language-bash">sudo reboot</code></pre>
<h1 id="测试验证">测试验证</h1>
<p>重启树莓派后，手机连接树莓派热点。一切正常的话，手机就可以 WiFi 上网了。</p>
<p><img src="/media/15779531074073/15788478095466.jpg" alt=""></p>
<h1 id="后话">后话</h1>
<p>树莓派热点能做很多事情，比如和手机等其他设备互联通信。插入多个无线网卡，还能实现 WiFi 中继等。</p>
<p>但这篇文章介绍的树莓派路由器只是个简单版本，没有 ADSL 宽带拨号功能，也没有进行性能优化，和商业路由器的差距还是比较大的。后续我会介绍如何用树莓派进行宽带拨号，甚至编译 openwrt 打造真正强大的路由器。</p>
<h1 id="参考资料">参考资料</h1>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/98078430">树莓派 4B 安装和启动</a></li>
<li><a href="https://www.raspberrypi.org/documentation/configuration/wireless/access-point.md">Setting up a Raspberry Pi as a Wireless Access Point</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hostapd">hostapd</a></li>
<li><a href="https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8">WLAN信道列表</a></li>
<li><a href="http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html">Man page of DNSMASQ</a></li>
<li><a href="http://www.zsythink.net/archives/1199">iptables详解：图文并茂理解iptables</a></li>
</ul>

  </article>
</div>
    </div>

    <script>
      window.context = {"site":{"post":{"map":{"/post/b2ae81d9-f111-4c2d-ab7a-52c4c33ccb45.html":{"title":"树莓派 Linux 操作系统大全","updateDate":"2020-02-08 18:15:08","createDate":"2020-02-08 18:15:08","tags":[],"categories":["系统开发","发行版"],"summary":"树莓派是 ARM 架构的卡片电脑，可以安装非常多的 Linux 发行版。而且它太流行了，即使有些 Linux 发行版没有官方支持树莓派，也有社区会维护树莓派的适配版，比如 ChromiumOS ..."},"/post/c6717517-cd43-4c06-9d90-9130fbf64f22.html":{"title":"树莓派 VS Arduino，哪个才是你的菜","updateDate":"2020-02-08 18:11:42","createDate":"2020-02-08 18:11:42","tags":["Arduino"],"categories":["概述"],"summary":"说到树莓派，很多人喜欢把它和 Arduino 对比：前者性能高但软件结构复杂，后者性能有限但容易上手。\n当要开始一个个人项目的时候，到底哪种微型计算机才合适？本文将解答这个问题。\n\n\n区别\n树莓..."},"/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html":{"title":"树莓派调节显示屏分辨率","updateDate":"2020-02-08 16:20:38","createDate":"2020-02-08 16:20:38","tags":["显示屏","分辨率"],"categories":["实用技巧"],"summary":"虽然连接上显示器后，树莓派会根据显示器配置自动调节分辨率，但如果调节得不好，或者其他原因，我们就要手动调节分辨率了。\n树莓派图形桌面上并没有调节分辨率的界面，我们要进入命令行操作。\n打开命令行，..."},"/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html":{"title":"从零开始：无屏幕和键盘配置树莓派 WiFi 和 SSH","updateDate":"2020-02-08 16:20:37","createDate":"2020-02-08 16:20:37","tags":["WiFi","SSH"],"categories":["实用技巧"],"summary":"树莓派的很多 DIY 玩法都要求联网和 ssh 登录，但这对于没有屏幕、没有键盘、没有网线的裸板树莓派玩家来说，就不是一件特别容易的事了。\n幸运的是，树莓派官方在2016年5月的发布日志里提到，..."},"/post/f13bd0ef-a754-4e12-9a6a-3b60b5a4036d.html":{"title":"无树莓派硬件体验：虚拟机安装 Raspberry Pi Desktop 操作系统","updateDate":"2020-02-08 16:20:24","createDate":"2020-02-08 16:20:24","tags":["操作系统"],"categories":["实用技巧"],"summary":"树莓派官方的 raspbian 操作系统有 PC 版本，就是能用来安装到自己的电脑上。可能是官方的推广策略，先把树莓派系统推出来，让大家可以在 PC 上体验。\n这篇文章就教大家，如何在电脑虚拟机..."},"/post/7f4c9c2e-1531-48d6-a220-11716f13df1a.html":{"title":"树莓派更换软件源","updateDate":"2020-02-08 16:20:09","createDate":"2020-02-08 16:20:09","tags":["软件源"],"categories":["实用技巧"],"summary":"在上一期 树莓派 4B 安装与启动 中，我给大家介绍了如何给树莓派安装操作系统并启动。\n但是在开始树莓派的各种 DIY 之前，我们还需要做一件事情：更换树莓派软件源。\n这里我简单解释下什么是软件..."},"/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html":{"title":"从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器","updateDate":"2020-02-08 16:19:30","createDate":"2020-02-08 16:19:30","tags":["WiFi","无线热点","软路由"],"categories":["高级项目"],"summary":"概述\n树莓派是一款来源于英国慈善组织“Raspberry Pi 基金会”的基于微处理器的硬件平台。核心是 Broadcom ARM 架构 CPU，可以完整运行 Ubuntu、Windows 10..."},"/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html":{"title":"树莓派投屏秒变家庭影院（安装 kodi）","updateDate":"2020-02-08 16:18:44","createDate":"2020-02-08 16:18:44","tags":["家庭影院","kodi"],"categories":["高级项目"],"summary":"在上一期的 树莓派更换软件源 中，我给大家介绍了如何更换软件源，以便更快速地安装树莓派应用。\n这次我就来手把手教大家打造一个家庭影院。\n这个过程比较复杂，用一篇文章的篇幅基本讲不清楚，所以我打算..."},"/post/eda0226e-c61b-457b-887f-70eefcc97678.html":{"title":"从零开始：连接树莓派远程桌面","updateDate":"2020-02-08 16:18:44","createDate":"2020-02-08 16:18:44","tags":["远程桌面"],"categories":["进阶项目"],"summary":"树莓派是信用卡大小的卡片电脑，自带 HDMI 接口、网线接口、USB 接口和 WiFi。\n玩转树莓派的时候，官方建议要配齐 USB 鼠标键盘和 HDMI 显示器，才能尽情享受 Raspbian ..."},"/post/a356a857-d4e0-4d1b-b279-99b41c9e12e7.html":{"title":"树莓派 4B 详细资料","updateDate":"2020-02-08 16:18:44","createDate":"2020-02-08 16:18:44","tags":["资料"],"categories":["概述"],"summary":"\n\n\n核心\nCPU：Broadcom BCM2711，1.5 GHz，64-bit，4核心，ARM Cortex-A72 架构，1MB shared L2 cache\nRAM：1、2、4 GB ..."},"/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html":{"title":"树莓派软路由 OpenWrt 简介","updateDate":"2020-02-08 16:18:44","createDate":"2020-02-08 16:18:44","tags":["软路由","无线热点","openwrt"],"categories":["高级项目"],"summary":"\n用树莓派 DIY 软路由的时候，总会说到 OpenWrt 这个开源 Linux 发行版。那 OpenWrt 到底是什么，为什么会用于树莓派软路由？这篇文章将会解答关于 OpenWrt 的一系列..."},"/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html":{"title":"教你外网登录树莓派远程桌面","updateDate":"2020-02-08 16:18:44","createDate":"2020-02-08 16:18:44","tags":["远程桌面","外网登录"],"categories":["进阶项目"],"summary":"在上期的教你从零开始连接树莓派远程桌面中，介绍了如何在同一局域网下登录树莓派远程桌面。但如果你出门在外，在外网环境，比如在公司或学校，还能不能登录？答案是肯定的。\n这篇文章就来教大家，如何外网登..."},"/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html":{"title":"教你用树莓派远程桌面和电脑互传文件","updateDate":"2020-02-08 16:18:40","createDate":"2020-02-08 16:18:40","tags":["远程桌面","互传文件"],"categories":["进阶项目"],"summary":"用远程桌面（VNC）登录树莓派后，可以像操作自己的电脑一样，用电脑的鼠标键盘显示器来玩转树莓派。但如果要从树莓派下载文件到电脑，或者从电脑上传文件给树莓派，又要怎么做？需不需要额外安装软件？答案..."},"/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html":{"title":"树莓派 4B 安装和启动","updateDate":"2020-02-08 16:16:51","createDate":"2020-02-08 16:16:51","tags":["安装","启动"],"categories":["入门"],"summary":"树莓派 4B 是一款来源于英国慈善组织“Raspberry Pi 基金会”，发布于 2019年6月的卡片电脑。\n树莓派 4B 详细资料\n树莓派 4B 开箱记录\n树莓派整个电路板就和信用卡这么大，..."}},"list":["/post/b2ae81d9-f111-4c2d-ab7a-52c4c33ccb45.html","/post/c6717517-cd43-4c06-9d90-9130fbf64f22.html","/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html","/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html","/post/f13bd0ef-a754-4e12-9a6a-3b60b5a4036d.html","/post/7f4c9c2e-1531-48d6-a220-11716f13df1a.html","/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html","/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html","/post/eda0226e-c61b-457b-887f-70eefcc97678.html","/post/a356a857-d4e0-4d1b-b279-99b41c9e12e7.html","/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html","/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html","/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html","/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html"],"count":14,"tags":{"Arduino":["/post/c6717517-cd43-4c06-9d90-9130fbf64f22.html"],"显示屏":["/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html"],"分辨率":["/post/defbb675-a0cd-4fc0-8cc8-d4c9144a7da2.html"],"WiFi":["/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html","/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html"],"SSH":["/post/1fa95c32-a39a-432f-ab9c-7612cdb2427a.html"],"操作系统":["/post/f13bd0ef-a754-4e12-9a6a-3b60b5a4036d.html"],"软件源":["/post/7f4c9c2e-1531-48d6-a220-11716f13df1a.html"],"无线热点":["/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html","/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html"],"软路由":["/post/8c8d5b17-f413-49c8-99b3-54b42460e918.html","/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html"],"家庭影院":["/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html"],"kodi":["/post/f8a10f97-af94-4d38-aed7-1b64f01fa7d1.html"],"远程桌面":["/post/eda0226e-c61b-457b-887f-70eefcc97678.html","/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html","/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html"],"资料":["/post/a356a857-d4e0-4d1b-b279-99b41c9e12e7.html"],"openwrt":["/post/c6bd8c4c-6b42-429d-9d45-c5430f718996.html"],"外网登录":["/post/f3e683de-1c19-4b20-8cd3-0737edec48d3.html"],"互传文件":["/post/987bf675-f9ce-4a3a-9a8c-46940eee6981.html"],"安装":["/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html"],"启动":["/post/f4b5ee10-c3ba-4cab-8090-92bc50efa6fc.html"]}}},"page":{"title":"从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器","content":"<h1 id=\"概述\">概述</h1>\n<p>树莓派是一款来源于英国慈善组织“Raspberry Pi 基金会”的基于<strong>微处理器</strong>的硬件平台。核心是 Broadcom ARM 架构 CPU，可以完整运行 Ubuntu、Windows 10 IoT Core 等操作系统。</p>\n<p>最新款的树莓派 4B 还板载了 USB 3.0 接口、千兆以太网卡、2.4/5 GHz 802.11b/g/n/ac 无线网卡等设备，性能强大，价格却足够便宜，能用来 DIY 很多东西。</p>\n<p>这篇文章就来教大家，如何从零开始将树莓派打造成一个功能强大的无线热点。</p>\n<h1 id=\"准备\">准备</h1>\n<ul>\n<li>宽带</li>\n<li>以太网线</li>\n<li>micro SD 卡和读卡器</li>\n<li>树莓派（最好是 4B 版本）</li>\n</ul>\n<h1 id=\"安装-raspbian-操作系统\">安装 Raspbian 操作系统</h1>\n<p>安装 Raspbian 是为了给无线热点准备操作系统环境。具体步骤参考：<a href=\"https://zhuanlan.zhihu.com/p/98078430\">树莓派 4B 安装和启动</a></p>\n<p>最好也要把软件源指向国内，避免后续软件下载速度太慢：<a href=\"https://zhuanlan.zhihu.com/p/98079246\">教你如何给树莓派更换软件源</a></p>\n<h1 id=\"安装配置-hostapd-服务\">安装配置 hostapd 服务</h1>\n<p>Hostapd 是一个运行在用户态，提供热点访问和鉴权的服务端进程。</p>\n<p><strong>首先安装服务</strong>：</p>\n<pre><code class=\"language-bash\">$ sudo apt install hostapd\n$ sudo systemctl stop hostapd</code></pre>\n<p><strong>接着，我们需要配置一下热点参数</strong>。配置文件地址在 <code>/etc/hostapd/hostapd.conf</code>，打开并编辑（如果没有这个文件的话，新建一个即可）：</p>\n<pre><code class=\"language-bash\">$ sudo nano /etc/hostapd/hostapd.conf</code></pre>\n<p>写入如下配置项。注意要根据自己的实际情况，替换 <code>???</code> 处的内容：</p>\n<ul>\n<li>ssid: WiFi 名称，8~64 个字符，最好用英文字母，不要出现特殊字符</li>\n<li>hw_mode: WiFi 网络模式，一般填 <code>g</code> 即可，设备支持的话可以填 <code>a</code> 启用 5G 频段：<ul>\n<li>a = IEEE 802.11a (5 GHz)</li>\n<li>b = IEEE 802.11b (2.4 GHz)</li>\n<li>g = IEEE 802.11g (2.4 GHz)</li>\n</ul>\n</li>\n<li>channel: 信道编号。如果上面配置了 <code>hw_mode=g</code> 使用 2.4G 频段，则一般填 <code>7</code> 即可。如果配置了 5G 频段，则信道编号有所不同，具体参考：<a href=\"https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8\">WLAN信道列表</a></li>\n<li>wpa_passphrase: WiFi 密码，最好用英文加数字，不要出现特殊字符</li>\n</ul>\n<pre><code>interface=wlan0\ndriver=nl80211\nssid=???\nhw_mode=???\nchannel=???\nwmm_enabled=0\nmacaddr_acl=0\nauth_algs=1\nignore_broadcast_ssid=0\nwpa=2\nwpa_passphrase=???\nwpa_key_mgmt=WPA-PSK\nwpa_pairwise=TKIP\nrsn_pairwise=CCMP</code></pre><p>这里给出一个示例配置值：</p>\n<p><img src=\"/media/15779531074073/15788222445162.jpg\" alt=\"-w1081\"></p>\n<p><strong>然后，给 hostapd 指定我们刚刚配置的配置文件</strong>。打开 <code>/etc/default/hostapd</code> 这个文件，去掉 <code>DAEMON_CONF</code> 的注释，并配置成 <code>/etc/hostapd/hostapd.conf</code>，如图所示。意思就是告诉 hostapd 要从 <code>/etc/hostapd/hostapd.conf</code> 读取配置参数。</p>\n<pre><code class=\"language-bash\">sudo nano /etc/default/hostapd</code></pre>\n<p><img src=\"/media/15779531074073/15788224110950.jpg\" alt=\"-w1081\"></p>\n<p><strong>最后，启动 hostapd 服务</strong>。</p>\n<pre><code class=\"language-bash\">sudo systemctl unmask hostapd\nsudo systemctl enable hostapd\nsudo systemctl start hostapd</code></pre>\n<p>过一会儿，就能看到 hardcore-rpi 的 WiFi 信号了。但是这个 WiFi 还没有连接网络，也不能给客户端分配 IP，接下来的小节就解决这些问题。</p>\n<p><img src=\"/media/15779531074073/15788272088655.jpg\" alt=\"-w442\"></p>\n<p>如果服务启动失败，比如报错 <code>&quot;systemctl status hostapd.service&quot; and &quot;journalctl -xe&quot; for details</code> 等，可以按如下步骤逐一排查：</p>\n<ol>\n<li>重启树莓派，再尝试启动 hostapd</li>\n<li>命令行执行 <code>sudo /usr/sbin/hostapd /etc/hostapd/hostapd.conf</code>，直接运行  hostapd，观察输出日志，一般都能发现问题。比如常见的：<ol>\n<li><code>hostapd.conf</code> 配置错误导致启动失败。检查配置文件，修改后，新启动 hostapd 即可。</li>\n<li>wlan0 端口未开启导致启动失败。执行 <code>sudo ifconfig wlan0 up</code> 开启端口后，重新启动 hostapd 即可。</li>\n</ol>\n</li>\n</ol>\n<p>这里给一个直接运行 hostapd 成功的截图，只要看到 &quot;ENABLED&quot; 字样就表示启动成功了。</p>\n<p><img src=\"/media/15779531074073/15788268889917.jpg\" alt=\"-w638\"></p>\n<h1 id=\"配置-wlan-静态-ip\">配置 wlan 静态 IP</h1>\n<p>用于 WiFi 热点的 wlan0 端口需要有固定的 IP 地址。假设树莓派热点的 IP 网段是 192.168.4.x，那么 wlan0 的 IP 就要设置成静态地址 192.168.4.1。</p>\n<p>树莓派以及大多数 Linux 发行版都由 dhcpcd 服务通过 DHCP（动态主机配置协议）获取自己的 IP 地址，所以这里我们要改掉 dhcpcd 的配置，让 wlan0 端口有静态 IP。</p>\n<p>编辑 dhcpcd 配置文件：</p>\n<pre><code class=\"language-bash\">sudo nano /etc/dhcpcd.conf</code></pre>\n<p>在文件末尾添加：</p>\n<pre><code>interface wlan0\n    static ip_address=192.168.4.1/24\n    nohook wpa_supplicant</code></pre><p><img src=\"/media/15779531074073/15788388792344.jpg\" alt=\"\"></p>\n<p>保存后，重启 dhcpcd 服务：</p>\n<pre><code class=\"language-bash\">sudo systemctl restart dhcpcd</code></pre>\n<p>执行 <code>ifconfig</code> 可以看到，wlan0 的 IP 地址已经固定成 192.168.4.1 了。</p>\n<p><img src=\"/media/15779531074073/15788389034861.jpg\" alt=\"\"></p>\n<h1 id=\"安装配置-dnsmasq-服务\">安装配置 dnsmasq 服务</h1>\n<p>dnsmasq 是一个小型的用于配置 DNS 和 DHCP 的工具，适用于小型网络，它提供了 DNS 和  DHCP 功能。</p>\n<p><strong>首先安装 dnsmasq 服务。</strong></p>\n<pre><code class=\"language-bash\">$ sudo apt install dnsmasq\n$ sudo systemctl stop dnsmasq</code></pre>\n<p><strong>接着，配置 dnsmasq 参数</strong>。打开 <code>/etc/dnsmasq.conf</code> 配置文件，把里面的其他内容都注释掉，添加新的配置项：</p>\n<pre><code class=\"language-bash\">sudo nano /etc/dnsmasq.conf</code></pre>\n<pre><code>interface=wlan0\ndhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h</code></pre><p>dhcp-range 配置项的意思是，dhcp 服务会给客户端分配 192.168.4.2 到 192.168.4.20 的 IP 空间，24 小时租期。更多配置信息可以参考 <a href=\"http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html\">Man page of DNSMASQ</a></p>\n<p><img src=\"/media/15779531074073/15788432541704.jpg\" alt=\"-w1081\"></p>\n<p><strong>然后，重启 dnsmasq 服务</strong>。</p>\n<pre><code class=\"language-bash\">sudo systemctl reload dnsmasq</code></pre>\n<p>此时用手机去连接热点，就能看到成功分配了动态 IP。</p>\n<p><img src=\"/media/15779531074073/15788446273098.jpg\" alt=\"-w440\"></p>\n<h1 id=\"配置-ip-包转发\">配置 IP 包转发</h1>\n<p>上面我们给树莓派安装了 hostapd 热点服务 和 dnsmasq DHCP 服务，已经可以让手机连接 WiFi 热点并分配到动态 IP 了，但仍不能联网，所以现在就剩最后一步：给树莓派配置 IP 包转发，让手机连接 WiFi 后能正常上网。</p>\n<p><strong>首先，开启 Linux 内核的 ip 转发功能</strong>。打开 <code>/etc/sysctl.conf</code> 系统配置文件，去掉 <code>net.ipv4.ip_forward=1</code> 这个配置项的注释：</p>\n<p><img src=\"/media/15779531074073/15788466235582.jpg\" alt=\"\"></p>\n<blockquote>\n<p>出于安全考虑，Linux系统默认是禁止数据包转发的。所谓转发即当主机拥有多于一块的网卡时，其中一块收到数据包，根据数据包的目的ip地址将数据包发往本机另一块网卡，该网卡根据路由表继续发送数据包。这通常是路由器所要实现的功能。</p>\n<p>要让Linux系统具有路由转发功能，需要配置一个Linux的内核参数net.ipv4.ip_forward。这个参数指定了Linux系统当前对路由转发功能的支持情况；其值为0时表示禁止进行IP转发；如果是1,则说明IP转发功能已经打开。</p>\n<p><a href=\"https://www.jianshu.com/p/134eeae69281\">Linux ip_forward 数据包转发</a></p>\n</blockquote>\n<p><strong>然后，修改 Linux 防火墙规则</strong>，完成报文源地址目标转换。</p>\n<pre><code class=\"language-bash\">sudo iptables -t nat -A  POSTROUTING -o eth0 -j MASQUERADE</code></pre>\n<p><strong>接着，设置开机自动导入防火墙规则</strong>。</p>\n<pre><code class=\"language-bash\">sudo sh -c &quot;iptables-save &gt; /etc/iptables.ipv4.nat&quot;</code></pre>\n<p>编辑 <code>/etc/rc.local</code>，把 <code>iptables-restore &lt; /etc/iptables.ipv4.nat</code> 加到最后一行 <code>exit 0</code> 的前面：</p>\n<p><img src=\"/media/15779531074073/15788473680529.jpg\" alt=\"\"></p>\n<p>然后，重启树莓派：</p>\n<pre><code class=\"language-bash\">sudo reboot</code></pre>\n<h1 id=\"测试验证\">测试验证</h1>\n<p>重启树莓派后，手机连接树莓派热点。一切正常的话，手机就可以 WiFi 上网了。</p>\n<p><img src=\"/media/15779531074073/15788478095466.jpg\" alt=\"\"></p>\n<h1 id=\"后话\">后话</h1>\n<p>树莓派热点能做很多事情，比如和手机等其他设备互联通信。插入多个无线网卡，还能实现 WiFi 中继等。</p>\n<p>但这篇文章介绍的树莓派路由器只是个简单版本，没有 ADSL 宽带拨号功能，也没有进行性能优化，和商业路由器的差距还是比较大的。后续我会介绍如何用树莓派进行宽带拨号，甚至编译 openwrt 打造真正强大的路由器。</p>\n<h1 id=\"参考资料\">参考资料</h1>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/98078430\">树莓派 4B 安装和启动</a></li>\n<li><a href=\"https://www.raspberrypi.org/documentation/configuration/wireless/access-point.md\">Setting up a Raspberry Pi as a Wireless Access Point</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Hostapd\">hostapd</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8\">WLAN信道列表</a></li>\n<li><a href=\"http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html\">Man page of DNSMASQ</a></li>\n<li><a href=\"http://www.zsythink.net/archives/1199\">iptables详解：图文并茂理解iptables</a></li>\n</ul>\n","raw":"\n# 概述\n\n树莓派是一款来源于英国慈善组织“Raspberry Pi 基金会”的基于**微处理器**的硬件平台。核心是 Broadcom ARM 架构 CPU，可以完整运行 Ubuntu、Windows 10 IoT Core 等操作系统。\n\n最新款的树莓派 4B 还板载了 USB 3.0 接口、千兆以太网卡、2.4/5 GHz 802.11b/g/n/ac 无线网卡等设备，性能强大，价格却足够便宜，能用来 DIY 很多东西。\n\n这篇文章就来教大家，如何从零开始将树莓派打造成一个功能强大的无线热点。\n\n# 准备\n\n- 宽带\n- 以太网线\n- micro SD 卡和读卡器\n- 树莓派（最好是 4B 版本）\n\n# 安装 Raspbian 操作系统\n\n安装 Raspbian 是为了给无线热点准备操作系统环境。具体步骤参考：[树莓派 4B 安装和启动](https://zhuanlan.zhihu.com/p/98078430)\n\n最好也要把软件源指向国内，避免后续软件下载速度太慢：[教你如何给树莓派更换软件源](https://zhuanlan.zhihu.com/p/98079246)\n\n# 安装配置 hostapd 服务\n\nHostapd 是一个运行在用户态，提供热点访问和鉴权的服务端进程。\n\n**首先安装服务**：\n\n```bash\n$ sudo apt install hostapd\n$ sudo systemctl stop hostapd\n```\n\n**接着，我们需要配置一下热点参数**。配置文件地址在 `/etc/hostapd/hostapd.conf`，打开并编辑（如果没有这个文件的话，新建一个即可）：\n\n```bash\n$ sudo nano /etc/hostapd/hostapd.conf\n```\n\n写入如下配置项。注意要根据自己的实际情况，替换 `???` 处的内容：\n\n- ssid: WiFi 名称，8~64 个字符，最好用英文字母，不要出现特殊字符\n- hw_mode: WiFi 网络模式，一般填 `g` 即可，设备支持的话可以填 `a` 启用 5G 频段：\n    - a = IEEE 802.11a (5 GHz)\n    - b = IEEE 802.11b (2.4 GHz)\n    - g = IEEE 802.11g (2.4 GHz)\n- channel: 信道编号。如果上面配置了 `hw_mode=g` 使用 2.4G 频段，则一般填 `7` 即可。如果配置了 5G 频段，则信道编号有所不同，具体参考：[WLAN信道列表](https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8)\n- wpa_passphrase: WiFi 密码，最好用英文加数字，不要出现特殊字符\n\n```\ninterface=wlan0\ndriver=nl80211\nssid=???\nhw_mode=???\nchannel=???\nwmm_enabled=0\nmacaddr_acl=0\nauth_algs=1\nignore_broadcast_ssid=0\nwpa=2\nwpa_passphrase=???\nwpa_key_mgmt=WPA-PSK\nwpa_pairwise=TKIP\nrsn_pairwise=CCMP\n```\n\n这里给出一个示例配置值：\n\n![-w1081](/media/15779531074073/15788222445162.jpg)\n\n**然后，给 hostapd 指定我们刚刚配置的配置文件**。打开 `/etc/default/hostapd` 这个文件，去掉 `DAEMON_CONF` 的注释，并配置成 `/etc/hostapd/hostapd.conf`，如图所示。意思就是告诉 hostapd 要从 `/etc/hostapd/hostapd.conf` 读取配置参数。\n\n```bash\nsudo nano /etc/default/hostapd\n```\n\n![-w1081](/media/15779531074073/15788224110950.jpg)\n\n**最后，启动 hostapd 服务**。\n\n```bash\nsudo systemctl unmask hostapd\nsudo systemctl enable hostapd\nsudo systemctl start hostapd\n```\n\n过一会儿，就能看到 hardcore-rpi 的 WiFi 信号了。但是这个 WiFi 还没有连接网络，也不能给客户端分配 IP，接下来的小节就解决这些问题。\n\n![-w442](/media/15779531074073/15788272088655.jpg)\n\n\n\n\n如果服务启动失败，比如报错 `\"systemctl status hostapd.service\" and \"journalctl -xe\" for details` 等，可以按如下步骤逐一排查：\n1. 重启树莓派，再尝试启动 hostapd\n2. 命令行执行 `sudo /usr/sbin/hostapd /etc/hostapd/hostapd.conf`，直接运行  hostapd，观察输出日志，一般都能发现问题。比如常见的：\n    1. `hostapd.conf` 配置错误导致启动失败。检查配置文件，修改后，新启动 hostapd 即可。\n    2. wlan0 端口未开启导致启动失败。执行 `sudo ifconfig wlan0 up` 开启端口后，重新启动 hostapd 即可。\n\n这里给一个直接运行 hostapd 成功的截图，只要看到 \"ENABLED\" 字样就表示启动成功了。\n\n![-w638](/media/15779531074073/15788268889917.jpg)\n\n# 配置 wlan 静态 IP\n\n用于 WiFi 热点的 wlan0 端口需要有固定的 IP 地址。假设树莓派热点的 IP 网段是 192.168.4.x，那么 wlan0 的 IP 就要设置成静态地址 192.168.4.1。\n\n树莓派以及大多数 Linux 发行版都由 dhcpcd 服务通过 DHCP（动态主机配置协议）获取自己的 IP 地址，所以这里我们要改掉 dhcpcd 的配置，让 wlan0 端口有静态 IP。\n\n编辑 dhcpcd 配置文件：\n\n```bash\nsudo nano /etc/dhcpcd.conf\n```\n\n在文件末尾添加：\n\n```\ninterface wlan0\n    static ip_address=192.168.4.1/24\n    nohook wpa_supplicant\n```\n\n![](/media/15779531074073/15788388792344.jpg)\n\n\n保存后，重启 dhcpcd 服务：\n\n```bash\nsudo systemctl restart dhcpcd\n```\n\n执行 `ifconfig` 可以看到，wlan0 的 IP 地址已经固定成 192.168.4.1 了。\n\n![](/media/15779531074073/15788389034861.jpg)\n\n\n# 安装配置 dnsmasq 服务\n\ndnsmasq 是一个小型的用于配置 DNS 和 DHCP 的工具，适用于小型网络，它提供了 DNS 和  DHCP 功能。\n\n**首先安装 dnsmasq 服务。**\n\n```bash\n$ sudo apt install dnsmasq\n$ sudo systemctl stop dnsmasq\n```\n\n**接着，配置 dnsmasq 参数**。打开 `/etc/dnsmasq.conf` 配置文件，把里面的其他内容都注释掉，添加新的配置项：\n\n```bash\nsudo nano /etc/dnsmasq.conf\n```\n\n```\ninterface=wlan0\ndhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h\n```\n\ndhcp-range 配置项的意思是，dhcp 服务会给客户端分配 192.168.4.2 到 192.168.4.20 的 IP 空间，24 小时租期。更多配置信息可以参考 [Man page of DNSMASQ](http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html)\n\n![-w1081](/media/15779531074073/15788432541704.jpg)\n\n**然后，重启 dnsmasq 服务**。\n\n```bash\nsudo systemctl reload dnsmasq\n```\n\n此时用手机去连接热点，就能看到成功分配了动态 IP。\n\n![-w440](/media/15779531074073/15788446273098.jpg)\n\n\n# 配置 IP 包转发\n\n上面我们给树莓派安装了 hostapd 热点服务 和 dnsmasq DHCP 服务，已经可以让手机连接 WiFi 热点并分配到动态 IP 了，但仍不能联网，所以现在就剩最后一步：给树莓派配置 IP 包转发，让手机连接 WiFi 后能正常上网。\n\n**首先，开启 Linux 内核的 ip 转发功能**。打开 `/etc/sysctl.conf` 系统配置文件，去掉 `net.ipv4.ip_forward=1` 这个配置项的注释：\n\n![](/media/15779531074073/15788466235582.jpg)\n\n> 出于安全考虑，Linux系统默认是禁止数据包转发的。所谓转发即当主机拥有多于一块的网卡时，其中一块收到数据包，根据数据包的目的ip地址将数据包发往本机另一块网卡，该网卡根据路由表继续发送数据包。这通常是路由器所要实现的功能。\n> \n> 要让Linux系统具有路由转发功能，需要配置一个Linux的内核参数net.ipv4.ip_forward。这个参数指定了Linux系统当前对路由转发功能的支持情况；其值为0时表示禁止进行IP转发；如果是1,则说明IP转发功能已经打开。\n> \n> [Linux ip_forward 数据包转发](https://www.jianshu.com/p/134eeae69281)\n\n**然后，修改 Linux 防火墙规则**，完成报文源地址目标转换。\n\n```bash\nsudo iptables -t nat -A  POSTROUTING -o eth0 -j MASQUERADE\n```\n\n**接着，设置开机自动导入防火墙规则**。\n\n```bash\nsudo sh -c \"iptables-save > /etc/iptables.ipv4.nat\"\n```\n\n编辑 `/etc/rc.local`，把 `iptables-restore < /etc/iptables.ipv4.nat` 加到最后一行 `exit 0` 的前面：\n\n![](/media/15779531074073/15788473680529.jpg)\n\n然后，重启树莓派：\n\n```bash\nsudo reboot\n```\n\n# 测试验证\n\n重启树莓派后，手机连接树莓派热点。一切正常的话，手机就可以 WiFi 上网了。\n\n![](/media/15779531074073/15788478095466.jpg)\n\n# 后话\n\n树莓派热点能做很多事情，比如和手机等其他设备互联通信。插入多个无线网卡，还能实现 WiFi 中继等。\n\n但这篇文章介绍的树莓派路由器只是个简单版本，没有 ADSL 宽带拨号功能，也没有进行性能优化，和商业路由器的差距还是比较大的。后续我会介绍如何用树莓派进行宽带拨号，甚至编译 openwrt 打造真正强大的路由器。\n\n# 参考资料\n\n- [树莓派 4B 安装和启动](https://zhuanlan.zhihu.com/p/98078430)\n- [Setting up a Raspberry Pi as a Wireless Access Point](https://www.raspberrypi.org/documentation/configuration/wireless/access-point.md)\n- [hostapd](https://en.wikipedia.org/wiki/Hostapd)\n- [WLAN信道列表](https://zh.wikipedia.org/wiki/WLAN%E4%BF%A1%E9%81%93%E5%88%97%E8%A1%A8)\n- [Man page of DNSMASQ](http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html)\n- [iptables详解：图文并茂理解iptables](http://www.zsythink.net/archives/1199)","meta":{"id":"8c8d5b17-f413-49c8-99b3-54b42460e918","title":"从零开始：树莓派共享 WiFi 秒变无线热点（树莓派路由器","categories":"高级项目","tags":["WiFi","无线热点","软路由"]},"createDate":"2020-02-08 16:19:30","updateDate":"2020-02-08 16:19:30"}}
    </script>

    <script src="https://cdn.bootcss.com/react/16.10.2/umd/react.production.min.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.10.2/umd/react-dom.production.min.js"></script>

    
      <script src="/post.ef45ab1a807502c16dc6.js"></script>
    

    
    <style> body > a { display: none; } </style>
    <script type="text/javascript" src="https://v1.cnzz.com/z_stat.php?id=1278605995&web_id=1278605995"></script>
  
  </body>
</html>
